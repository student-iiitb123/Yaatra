<% layout("/layouts/boilerplate") %>

<div class="container my-5">
  <h1 class="text-center mb-4 text-primary fw-bold">
    <%= listing.title %>
  </h1>

  <div class="card shadow-lg p-4 rounded">
    <ul class="list-group list-group-flush fs-5">
      <li class="list-group-item"><strong> Title:</strong> <%= listing.title %></li>
      <li class="list-group-item"><strong> Price:</strong> â‚¹<%= listing.price %></li>
      <li class="list-group-item"><strong> Description:</strong> <%= listing.description %></li>
      <li class="list-group-item"><strong> Location:</strong> <%= listing.location %></li>
      <li class="list-group-item"><strong> Country:</strong> <%= listing.country %></li>
    </ul>

    <div class="mt-4 d-flex justify-content-center gap-3 flex-wrap">
      <a href="/listings/<%= listing._id %>/edit" class="btn btn-outline-primary btn-lg">
         Edit Listing
      </a>
      <form action="/listings/<%= listing._id %>?_method=DELETE" method="POST">
        <button class="btn btn-outline-danger btn-lg" onclick="return confirm('Are you sure babe? ')">
          ðŸ—‘ Delete Listing
        </button>
      </form>
    </div>
  </div>

  <!--  Review Section -->
  <div class="container mt-5">
    <hr />
    <h3 class="mb-4 text-primary"> Leave a Review</h3>

    <form method="POST" action="/listings/<%= listing._id %>/reviews">
     

      <fieldset class="starability-grow mb-4">
  <legend class="mb-2">Rate this stay:</legend>
  <input type="radio" id="no-rate" class="input-no-rate" name="review[rating]" value="0" checked aria-label="No rating." />
  <input type="radio" id="rate1" name="review[rating]" value="1" />
  <label for="rate1" title="Terrible">1 star</label>
  <input type="radio" id="rate2" name="review[rating]" value="2" />
  <label for="rate2" title="Not good">2 stars</label>
  <input type="radio" id="rate3" name="review[rating]" value="3" />
  <label for="rate3" title="Average">3 stars</label>
  <input type="radio" id="rate4" name="review[rating]" value="4" />
  <label for="rate4" title="Very good">4 stars</label>
  <input type="radio" id="rate5" name="review[rating]" value="5" />
  <label for="rate5" title="Amazing">5 stars</label>
</fieldset>


      <!-- Comment Box -->
      <div class="mb-3">
        <label for="comment" class="form-label"> Comments</label>
        <textarea class="form-control" id="comment" name="review[comment]" rows="5" placeholder="Write something lovely..."></textarea>
      </div>

      <button type="submit" class="btn btn-dark px-4 fw-bold">Submit Review</button>
    </form>

    <!-- All Reviews Section -->
    <hr/>
    <h4 class="mb-3"> All Reviews</h4>

    <% if (listing.reviews.length === 0) { %>
      <p class="text-muted">No reviews yet. Be the first to share your experience! ðŸ’Œ</p>
    <% } %>

    <ul class="list-group">
      <% for (let review of listing.reviews) { %>
        <li class="list-group-item d-flex justify-content-between align-items-center">
          <div>
            <strong>Comment:</strong> <%= review.comment %><br>
            <br> 
             <p class="starability-result" data-rating="<%= review.rating %>"></p>
          </div>
          <small class="text-muted"><%= review.createdAt.toDateString() %></small>
        </li>
      <% } %>
    </ul>
     

  </div>
</div>




  
    
